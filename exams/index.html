<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOU NEED TO PANIC!!!!!!!</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        .tbtn {
            position: absolute;
            top: 2rem;
            cursor: pointer;
            right: 2rem;
            font-size: 1.1em;
        }

        @media screen and (max-width: 700px){
            .tbtn {
                position: fixed;
                bottom: 1rem;
                left: 50%;
                transform: translateX(-50%);
                right: auto;
                top: auto;
                background-color: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(0, 0, 0, 0.41);
                border-radius: 8px;
                padding: 0.25rem 0.8rem;
            }
        }

        body{
            font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
            background:#fff;
            color:#000;
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            flex-direction: column;
            padding:5vh 5vw;
        }
        .container{
            width:100%;
            max-width:900px;
            display:flex;
            flex-direction:column;
            gap:10vh;
        }
        .event{
            text-align:center;
        }
        .event-title{
            font-size:1rem;
            font-weight:600;
            letter-spacing:.05em;
            margin-bottom:1.2rem;
            color:#000;
        }
        .countdown{
            display:flex;
            justify-content:center;
            gap:min(3vw,24px);
        }
        .unit{
            min-width:min(18vw,140px);
        }
        .value{
            font-size:min(15vw,90px);
            font-weight:900;
            line-height:1;
            height:min(15vw,90px);
            overflow:hidden;
            position:relative;
        }
        .value-inner{
            position:absolute;
            inset:0;
            transition:transform .6s cubic-bezier(.45,0,.55,1), color 1s ease-out;
            transform:translateY(0%);
            color: #000;
        }

        .value-inner.slide-out{
            transform:translateY(100%);
        }
        .value-inner.new-slide-in {
            transform: translateY(-100%);
        }

        .color-stage-1 { color: #8B0000; }
        .color-stage-2 { color: #DC143C; }
        .color-stage-3 { color: #FF0000; }

        .label{
            margin-top:.6rem;
            font-size:.75rem;
            letter-spacing:.1em;
            color:#000;
        }
        .expired{
            font-size:min(12vw,72px);
            font-weight:900;
            color:#d00;
        }
        @media(prefers-reduced-motion:reduce){
            .value-inner{transition:none}
        }
    </style>
</head>
<body>
    <div class="event-title" style="transform:scale(0.9); margin-bottom: 5vh; text-align: center;" id="splash-text"></div>
    <hr style="width: 5%; margin-bottom:5vh;">
    <div id="root"></div>
    <span class="tbtn" id="hide">Hide Expired</span>
    <script>
        document.addEventListener('DOMContentLoaded', ()=>{
            let h = 0;
            const hide = document.getElementById("hide");
            let es = Array.from(document.getElementsByClassName("event"));
            hide.addEventListener("click", () =>{
                if (h == 0) {
                    hide.innerText = "Unhide Expired";
                    es.forEach(e => {
                        if (e.querySelector('div.expired')) {
                            e.style.display = "none";
                        }
                    })
                    h = 1;
                    localStorage.setItem("expiredhidden", "True");
                } else {
                    hide.innerText = "Hide Expired";
                    es.forEach(e => {
                        if (e.querySelector('div.expired')) {
                            e.style.display = "block";
                        }
                    })
                    h = 0;
                    localStorage.setItem("expiredhidden", "False");
                }
            })

            if (localStorage.getItem("expiredhidden") == "True") {
                hide.innerText = "Unhide Expired";
                es.forEach(e => {
                    if (e.querySelector('div.expired')) {
                        e.style.display = "none";
                    }
                })
                h = 1;
            }
        })

        const dates=[
            {name:"COMPENG 2DI4 MIDTERM",date:new Date("2025-10-29T19:00:00")},
            {name:"ELECENG 2CI4 MIDTERM",date:new Date("2025-10-27T19:00:00")},
            {name:"MATH 2Z03 MIDTERM (ends)",date:new Date("2025-10-27T20:00:00")},
            {name:"MATH 2Z03 MIDTERM 2: MIDTERM HARDER (ends)",date:new Date("2025-11-24T08:00:00")},
            {name:"COMPENG 2SH4 MIDTERM",date:new Date("2025-10-22T18:50:00")},
            {name:"STATS 3Y03 MIDTERM",date:new Date("2025-10-03T19:00:00")},
            {name:"STATS 3Y03 FINAL",date:new Date("2025-12-10T16:00:00")},
            {name:"ELECENG 2CI4 FINAL",date:new Date("2025-12-06T19:30:00")},
            {name:"COMPENG 2SH4 FINAL",date:new Date("2025-12-12T09:00:00")},
            {name:"MATH 2Z03 FINAL",date:new Date("2025-12-13T16:00:00")},
            {name:"COMPENG 2DI4 FINAL",date:new Date("2025-12-16T12:30:00")},
            {name:"END OF THE UNIVERSE",date:new Date("1219672405-02-24T21:51:32")},
        ];

        dates.sort((a, b) => a.date - b.date);

        const root=document.getElementById("root");
        root.className="container";

        dates.forEach(o=>{
            const d=document.createElement("div");d.className="event";
            d.innerHTML=`
                <div class="event-title">${o.name}</div>
                <div class="countdown">
                    ${["days","hours","mins","secs"].map(u=>`
                        <div class="unit">
                            <div class="value" data-unit="${u}">
                                <div class="value-inner current">00</div>
                            </div>
                            <div class="label">${u.toUpperCase()}</div>
                        </div>`).join("")}
                </div>`;
            root.appendChild(d);
            new Countdown(d,o.name,o.date);
        });

        function Countdown(el, name, target){
            const prev={d:null,h:null,m:null,s:null};
            const ONE_WEEK_MS = 7 * 24 * 60 * 60 * 1000;
            const ONE_DAY_MS = 24 * 60 * 60 * 1000;

            const tick=()=>{
                const r=target-new Date();
                if(r<=0){el.innerHTML=`<div class="expired">THE TIME HAS COME</div><div style="font-size: 0.8em; font-style: italic; color:#560015">Was ${name}<br>Expired ${target.toDateString()}</div>`;return true;}

                const d=Math.floor(r/864e5);
                const h=Math.floor((r % 864e5) / 36e5);
                const m=Math.floor((r % 36e5) / 6e4);
                const s=Math.floor((r % 6e4) / 1e3);

                let colorClass = '';
                if (r < ONE_DAY_MS) {
                    colorClass = 'color-stage-3';
                } else if (r < ONE_WEEK_MS / 2) {
                    colorClass = 'color-stage-2';
                } else if (r < ONE_WEEK_MS) {
                    colorClass = 'color-stage-1';
                }

                set("days",d, colorClass);
                set("hours",h, colorClass);
                set("mins",m, colorClass);
                set("secs",s, colorClass);
            };

            const set=(unit,val, colorClass)=>{
                const wrap=el.querySelector(`[data-unit="${unit}"]`);
                const old=wrap.querySelector(".current");

                if(prev[unit[0]]===null){
                    prev[unit[0]]=val;
                    old.textContent=String(val).padStart(2,"0");
                    old.className = `value-inner current`;
                    if (colorClass) {
                        old.classList.add(colorClass);
                    }
                    return;
                }

                if(prev[unit[0]]!==val){
                    const neu=document.createElement("div");
                    neu.className=`value-inner new-slide-in`;

                    if (colorClass) {
                        neu.classList.add(colorClass);
                    }


                    neu.textContent=String(val).padStart(2,"0");

                    wrap.appendChild(neu);

                    void neu.offsetWidth;

                    old.classList.remove("current");
                    old.classList.add("slide-out");
                    neu.classList.remove("new-slide-in");
                    neu.classList.add("current");
                    old.classList.remove('color-stage-1', 'color-stage-2', 'color-stage-3');
                    setTimeout(() => old.remove(), 600);

                    prev[unit[0]]=val;
                } else {
                    if (colorClass) {
                        old.classList.remove('color-stage-1', 'color-stage-2', 'color-stage-3');
                        old.classList.add(colorClass);
                    } else {
                        // If colorClass is empty, ensure no color classes are present
                        old.classList.remove('color-stage-1', 'color-stage-2', 'color-stage-3');
                    }

                }
            };
            const iv=setInterval(()=>{if(tick())clearInterval(iv);},1000);
            tick();
        }

        const splashTexts = [
            "PANIC!!!!!!!",
            "oh gjod oh fjuck oh god oh god",
            "THE END IS NIGH!!!!!!",
            "STUDY NOW OR YOU WILL BE HOMELESS OR WORSE: WORKING AT BEST BUY",
            "Ephesians 6:12",
            "god help you.",
            "im not gonna lie i tried this hummus with peppers added to it once and it was actually better than i thought. i thought the pepper would be like a bit much or soggy but no it was pretty pleasant. i would buy it again honestly except for the fact it's never on sale (i guess everyones pepperpilled to the extent where the pepper hummus never goes on sale) but i guess there's not much you can do, especially since they keep making that one dogshit flavour (the one with the weird spices that taste kind of like feet (not that i would know what feet taste like, i'm speaking from an objective feet-smell-translation sense here) but it kind of ruins it) and so thats the one that is always on sale and like some kind of good little capitalismpilled slave i keep buying it because my monkey brain cant pass up the chance to save $1 on a terrible container of the worst hummus youve ever tasted. anyways i actually discovered that they put tahini in hummus. i dont know what i imagined before, like they were siblings on the processed-nut-spread family tree or something but apparently no tahinis sesame and hummus is chickpeas and they actually just add it to the hummu",
            "you need to throw up.... NOW!!!",
            "Our father who art in heaven, hallowed be thy name, thy kingdom come, thy will be done, on ea",
            "CRY IN THE THODE STAIRWELL!!",
            "THE STORM IS BREAKING UPON THE HORIZON",
            "Childs is watching you right now using his mystical psychic powers and weeping. Do not disappoint him.",
            "remember... you can always switch to econ",
            "pl ease helpp me i  am trapepd in a javasript array i dont knw what to do oh god",
            "no matter how much you study remember you are actually always at the confident-but-unfortunately-an-idiot side of the dunning kruger curve. thats right. KEEP STUDYING",
            "THE VOID STARES BACK",
            "DRINK MORE COFFEE!!",
            "PANIC!!!",
            "PANIC NOW!!!!!!!",
            "YOU SHOULD HAVE STARTED PREPARING TWO WEEKS AGO",
            "FEEL THE BURN"
        ];

        const splash = document.getElementById("splash-text");
        splash.innerText = splashTexts[Math.floor(Math.random() * splashTexts.length)];
    </script>
</body>
</html>